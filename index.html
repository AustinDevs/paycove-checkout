<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shopping Cart</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }
    .cart {
      width: 50%;
      margin: 0 auto;
      border: 1px solid #ccc;
      padding: 20px;
      border-radius: 5px;
    }
    .cart-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    .cart-item:last-child {
      margin-bottom: 0;
    }
    .checkout {
      text-align: center;
      margin-top: 20px;
    }
    .checkout button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="cart">
    <h2>Shopping Cart</h2>
    <div class="user-info">
      <label for="full-name">Full Name:</label>
      <input type="text" id="full-name" name="full-name" required>
      <br>
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required>
    </div>
    <div class="cart-item">
      <span>Item 1</span>
      <span>$10.00</span>
    </div>
    <div class="cart-item">
      <span>Item 2</span>
      <span>$15.00</span>
    </div>
    <div class="cart-item">
      <span>Item 3</span>
      <span>$20.00</span>
    </div>
    <div class="checkout">
      <button>Checkout</button>
    </div>
  </div>
  <br><br>
  <div><pre><code></code></pre></div>
</body>
<script>
  const buildUrl = () => {
    const name = document.getElementById('full-name').value;
    const email = document.getElementById('email').value;
    const items = document.querySelectorAll('.cart-item');
    let url = 'https://local.paycove.io/checkout?contact[name]=' + encodeURIComponent(name) + '&contact[email]=' + encodeURIComponent(email) + '&account_id=e3e742f36fb750a0151631184000807d&type=invoice';

    items.forEach((item, index) => {
      const itemName = item.children[0].textContent;
      const itemPrice = item.children[1].textContent.replace('$', '');
      url += `&line_items[${index}][name]=${encodeURIComponent(itemName)}&line_items[${index}][price]=${encodeURIComponent(itemPrice)}&line_items[${index}][quantity]=1`;
    });

    url += '&name=Checkout Deal&redirect_url=https%3A%2F%2Faustindevs.github.io/paycove-checkout/thanks.html';

    return url;
  }
  [...document.querySelectorAll('input')].forEach(el => el.addEventListener('change', () => document.querySelector('code').innerText = buildUrl()));
  document.querySelector('.checkout button').addEventListener('click', () => window.location.href = buildUrl());
</script>
</html>
